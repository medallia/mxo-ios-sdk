//
//  MXOInteractionRequest.h
//  MedalliaMXO
//
//  Copyright Â© 2023 Medallia. Use subject to licensing terms.
//

#import <Foundation/Foundation.h>

NS_ASSUME_NONNULL_BEGIN

@class MXORequest, MXOInteractionRequestBuilder;

///////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Typedef
///////////////////////////////////////////////////////////////////////////////////////////

typedef void (^MXOInteractionRequestBuilderBlock)(MXOInteractionRequestBuilder *builder);

///////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - MXOInteractionRequest
///////////////////////////////////////////////////////////////////////////////////////////

@interface MXOInteractionRequest : MXORequest

///////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Properties
///////////////////////////////////////////////////////////////////////////////////////////

@property (nonatomic, strong, readonly, nullable) NSDictionary<NSString *, NSString *> *properties;

///////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Instance Methods
///////////////////////////////////////////////////////////////////////////////////////////

- (MXOInteractionRequestBuilder *)builder;

- (instancetype)init NS_UNAVAILABLE;

///////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Class Methods
///////////////////////////////////////////////////////////////////////////////////////////

+ (instancetype)initWithBuilder:(MXOInteractionRequestBuilderBlock)block NS_SWIFT_NAME(init(withBuilder:));

@end


///////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - MXOInteractionRequestBuilder
///////////////////////////////////////////////////////////////////////////////////////////

@interface MXOInteractionRequestBuilder : NSObject

///////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Properties
///////////////////////////////////////////////////////////////////////////////////////////

@property (nonatomic, strong, nullable) MXOInteraction *interaction;

@property (nonatomic, strong, nullable) NSDictionary<NSString *, NSString *> *properties;

@property (nonatomic, copy, nullable) MXORequestOnErrorBlock onError;

@property (nonatomic, copy, nullable) MXORequestOnSuccessBlock onSuccess;

///////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Instance Methods
///////////////////////////////////////////////////////////////////////////////////////////

- (MXOInteractionRequest *)build;

@end

NS_ASSUME_NONNULL_END
